# Overview

ржПржЗ ржкрзНрж░рж╢рзНржиржЯрж┐ JavaScript ржПрж░ `closure` ржХржирж╕рзЗржкрзНржЯрзЗрж░ ржкрзНрж░рж╛ржержорж┐ржХ ржкрж░рж┐ржЪрзЯ ржжрзЗрзЯред
JavaScript ржП ржХрзЛржирзЛ ржлрж╛ржВрж╢ржи рждрж╛рж░ ржирж┐ржЬрзЗрж░ рж╕рзНржХрзЛржк ржПржмржВ ржмрж╛ржЗрж░рзЗрж░ рж╕рзНржХрзЛржк ржП ржбрж┐ржХрзНрж▓рж╛рж░рзНржб ржнрж╛рж░рж┐рзЯрзЗржмрж▓ ржЧрзБрж▓рзЛ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗред ржПржЗ рж╕рзНржХрзЛржк ржПрж░ ржнрж┐рждрж░рзЗ ржерж╛ржХрж╛ рж╕ржм ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржПржмржВ рждрж╛ржжрзЗрж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ рж╕рж╣ ржпрзЗржЗ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ рждрзИрж░рж┐ рж╣рзЯ, рж╕рзЗржЯрж╛ржХрзЗ ржмрж▓рзЗ `lexical environment`ред 
ржПржХржЯрж╛ ржлрж╛ржВрж╢ржи ржпржЦржи рждрж╛рж░ рж╕рж╛ржерзЗ рждрж╛рж░ `lexical environment` ржПрж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржзрж░рзЗ рж░рж╛ржЦрзЗ - even ржлрж╛ржВрж╢ржиржЯрж╛ ржпрзЗржЗ рж╕рзНржХрзЛржкрзЗ ржбрж┐ржХрзНрж▓рж╛рж░рзНржб рж╣рзЯрзЗржЫрж┐рж▓рзЛ рж╕рзЗржЯрж╛ ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯ рж╣рзЯрзЗ рж╢рзЗрж╖ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗржУ рждржЦржи ржПржЗ ржлрж╛ржВрж╢ржирзНржЯрж╛ржХрзЗ ржмрж▓рзЗ `closure`ред

# Closure Example
JavaScript ржП ржЖржорж░рж╛ ржЪрж╛ржЗрж▓рзЗ ржлрж╛ржВрж╢ржи ржПрж░ ржоржзрзНржпрзЗ ржлрж╛ржВрж╢ржи ржбрж┐ржХрзНрж▓рж╛рж░рзНржб ржПржмржВ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред ржПржЗ ржнрж┐рждрж░рзЗрж░ ржлрж╛ржВрж╢ржи ржПрж░ ржХрж╛ржЫрзЗ ржЙржкрж░ ржПрж░ рж╕ржм ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржПрж░  ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржерж╛ржХржмрзЗред
```javascript
function createAdder(a) {
  return function add(b) {
    const sum = a + b;
    return sum;
  }
}
const addTo2 = createAdder(2);
addTo2(5); // 7

```
ржПржЦрж╛ржирзЗ ржнрж┐рждрж░рзЗрж░ ржлрж╛ржВрж╢ржи `add` ржПрж░ ржХрж╛ржЫрзЗ `a` ржЖрж░рзНржЧрзБржорзЗржирзНржЯ ржПрж░ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржЖржЫрзЗ ред


#  Closures vs Classes

рждрзБржорж┐ рж╣рзЯрждрзЛ ржЖржЧрзЗрж░ example-ржП ржЦрзЗрзЯрж╛рж▓ ржХрж░ржЫрзЛ, `createAdder` ржЕржирзЗржХржЯрж╛ class constructor-ржПрж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рзЗред ржирж┐ржЪрзЗ ржПржХржЯрж╛ class-based version ржжрзЗржЦ:

```javascript
class Adder {
  constructor(a) {
    this.a = a;
  }

  add(b) {
    const sum = this.a + b;
    return sum;
  }
}

const addTo2 = new Adder(2);
console.log(addTo2.add(5)); // 7
```




рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕рзЗ ржХрж┐ржЫрзБ ржкрж╛рж░рзНржержХрзНржп ржерж╛ржХрж▓рзЗржУ, class ржЖрж░ closureтАФржжрзБржЯрзЛрждрзЗржЗ ржЖржкржирж┐ ржХрж┐ржЫрзБ state (ржорж╛ржирзЗ internal ржбрзЗржЯрж╛) ржЗржиржкрзБржЯ ржжрж┐рждрзЗ ржкрж╛рж░рзЗржи constructor-ржПрж░ ржорждрзЛ ржХрж░рзЗред  ржПржЗ state-ржПрж░ ржЙржкрж░ ржХрж╛ржЬ ржХрж░рж╛ method ржмрж╛ function рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред



##  Encapsulation: Closures are safer

Closures-ржПрж░ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЬ рж╕рзБржмрж┐ржзрж╛ рж╣ржЪрзНржЫрзЗ: ржПржЧрзБрж▓рзЛ **real encapsulation** ржжрзЗрзЯред Class ржЗржЙржЬ ржХрж░рж▓рзЗ, ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржмрж╛ржЗрж░рзЗрж░ ржжрж┐ржХ ржерзЗржХрзЗ internal ржбрзЗржЯрж╛ change ржХрж░рзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗржи:

```javascript
const addTo2 = new Adder(2);
addTo2.a = 99; // ржХрзЗржЙ ржЪрж╛ржЗрж▓рзЗ a-рж░ ржорж╛ржи ржмржжрж▓рзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗ!
```

ржПржЗржЯрж╛ рж╣ржЪрзНржЫрзЗ ржПржХржЯрж╛ ржмрзЬ рж╕ржорж╕рзНржпрж╛ред ржХрж╛рж░ржг ржПрждрзЗ object-ржПрж░ expected behavior ржнрзЗржЩрзЗ ржпрж╛рзЯред

ржХрж┐ржирзНрждрзБ Closure ржЗржЙржЬ ржХрж░рж▓рзЗ:

```javascript
function createAdder(a) {
  return function (b) {
    return a + b;
  };
}

const addTo2 = createAdder(2);
```

ржПржЦрж╛ржирзЗ `a` ржмрж╛ржЗрж░рзЗрж░ ржжрж┐ржХ ржерзЗржХрзЗ **access ржХрж░рж╛ ржПржХржжржо impossible**ред ржХрж╛рж░ржг `a` рж╢рзБржзрзБржорж╛рждрзНрж░ function scope-ржПрж░ ржнрж┐рждрж░рзЗ accessibleред

2022 ржерзЗржХрзЗ JavaScript-ржП `#privateField` syntax (`this.#a`) ржЗржЙржЬ ржХрж░рзЗ class-ржПрж░ ржнрж┐рждрж░рзЗржУ encapsulation ржХрж░рж╛ ржпрж╛рзЯ, ржХрж┐ржирзНрждрзБ ржПржЦржиржУ closure naturally more secure.



ржПржЦрж╛ржирзЗржУ ржПржХржЯрж╛ ржмрзЬ performance ржкрж╛рж░рзНржержХрзНржп ржЖржЫрзЗред

ржзрж░рзЗржи, ржЖржкржирж┐ ржПржХржЗ ржЯрж╛ржЗржкрзЗрж░ рззрзжрзжржЯрж╛ object рждрзИрж░рж┐ ржХрж░рж▓рзЗржи:

- **Class ржЗржЙржЬ ржХрж░рж▓рзЗ**: ржкрзНрж░рждрж┐ржЯрж╛ instance рж╢рзБржзрзБ ржПржХржЯрж╛ shared reference рж░рж╛ржЦрзЗ prototype-ржПрж░ ржорзЗржержб ржЧрзБрж▓рж╛рж░ред рждрж╛ржЗ **memory usage ржХржо** рж╣рзЯред

- **Closure ржЗржЙржЬ ржХрж░рж▓рзЗ**: ржкрзНрж░рждрж┐ржмрж╛рж░ outer function ржХрж▓ рж╣рж▓рзЗ ржирждрзБржи ржХрж░рзЗ method/function рждрзИрж░рж┐ рж╣рзЯ, рждрж╛ржЗ ржкрзНрж░рждрж┐ржЯрж╛ instance ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ ржорзЗржорзЛрж░рж┐ ржирзЗрзЯред  
  ржЕрж░рзНржерж╛рзО, **memory usage ржмрзЗрж╢рж┐** рж╣рзЯред

ЁЯУМ рждрж╛ржЗ ржпржжрж┐ ржЖржкржирж┐ ржЕржирзЗржХ instance ржмрж╛ржирж╛рждрзЗ ржЪрж╛ржи, ржЖрж░ ржЕржирзЗржХржЧрзБрж▓рзЛ method ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ **class-based structure ржмрзЗрж╢рж┐ efficient** рж╣ржмрзЗред



## ЁЯзк Conclusion

closures is very weird concept! ЁЯШТ